<!DOCTYPE html>
<head>
    <title>Dishify - Registro</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="login.css">
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var params = new URLSearchParams(window.location.search);
            if (params.has("noExiste")) {
                alert("No existe la persona, por favor registrese");
            }
            if (params.has("registroFallido")) {
                alert("Error registrando usuario. Intenta de nuevo.");
            }
        });
        function showPassword() {
            let pwShowHide = document.querySelectorAll(".pw_hide");
            pwShowHide.forEach((icon) => {
                icon.addEventListener("click", () => {
                    let getPwInput = icon.parentElement.querySelector("input");
                    if (getPwInput.type === "password") {
                        getPwInput.type = "text";
                        icon.classList.replace("uil-eye-slash", "uil-eye");
                    } else {
                        getPwInput.type = "password";
                        icon.classList.replace("uil-eye", "uil-eye-slash");
                    }
                });
            });
        }
        function validarContra() {
            var contraseña = document.getElementById("contra").value;
            var confirmarContraseña = document.getElementById("confirmarContra").value;

            if (contraseña !== confirmarContraseña) {
                alert("Las contraseñas no coinciden. Por favor, inténtalo de nuevo.");
                return false;
            }
            return true;
        }
        function nose() {
            var errorMessage = new URLSearchParams(window.location.search).get("message");
            document.getElementById("error-message").innerHTML = errorMessage;
        }

        document.addEventListener("DOMContentLoaded", function () {
            showPassword();
            nose();
        });
    </script>
</head>

<body>
    <header>
        <div class="container">
            <a href="index.html" id="logo"><img src="Images/Logo.png" alt="DishifyMx"></a>
            <nav>
                <a href="index.html">Inicio</a>
                <a href="index.html#servicios">Servicios</a>
                <a href="index.html#acerca">Acerca de</a>
                <a href="index.html#info">Contacto</a>
            </nav>
        </div>
    </header>
    <section id="home">
        <div class="form_container">
            <div class="login_form">
                <form action="registrarse.jsp">
                    <h2>Crear Cuenta</h2>
                    <div class="input_box">
                        <input type="text" id="username" name="username" placeholder="Ingrese su usuario" required>
                        <i class="uil uil-user"></i>
                    </div>
                    <div class="input_box">
                        <input type="password" id="password" name="password" placeholder="Ingrese su contraseña"
                            required>
                        <i class="uil uil-lock password"></i>
                        <i class="uil uil-eye-slash pw_hide"></i>                    
                    </div>
                    <div class="input_box">
                        <input type="password" id="cpassword" name="cpassword" placeholder="Confirmar contraseña"
                            required>
                        <i class="uil uil-lock password"></i>
                        <i class="uil uil-eye-slash pw_hide"></i>  
                    </div>
                    <div class="input_box">
                        <input type="text" id="nombre" name="nombre" placeholder="Ingrese su nombre" required>
                        <i class="uil uil-user"></i>
                    </div>
                    <div class="input_box">
                        <input type="text" id="rol" name="rol" placeholder="Ingrese su rol" required>
                        <i class="uil uil-user"></i>
                    </div>
                    <input type="submit" class="button" value="Crear cuenta" onclick="validateMessage();validarContra();">
                    <div class="error">
                        <p id="error-message" class="error"></p>
                    </div>
                </form>
                <h6><a href="login.html">¿Ya tienes cuenta? Ingresa</a></h6>
            </div>
        </div>
    </section>
    <footer>
        <div class="container">
            <p>&copy; HIP, Medica Star.</p>
        </div>
    </footer>
</body>
</html>